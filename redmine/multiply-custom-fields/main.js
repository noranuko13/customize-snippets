!function s(n,i,u){function o(e,t){if(!i[e]){if(!n[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(a)return a(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=i[e]={exports:{}},n[e][0].call(r.exports,function(t){return o(n[e][1][t]||t)},r,r.exports,s,n,i,u)}return i[e].exports}for(var a="function"==typeof require&&require,t=0;t<u.length;t++)o(u[t]);return o}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const s=t("../shared/issues");r=t("../shared/routes");{const n={key:"mcf",nameKey:"＊",calc:t=>t.reduce((t,e)=>t*e,1)};((0,r.isIssueShow)()||(0,r.isIssueNew)())&&(new s.Formula(n).execute(),(new s.Property).div().addEventListener("change",t=>{const e=t.target;t=new s.Formula(n),t.factors().some(t=>t.input().isEqualNode(e))&&t.execute(),t=new s.Property;(t.tracker().select().isEqualNode(e)||t.status().select().isEqualNode(e))&&setTimeout(()=>new s.Formula(n).execute(),700)}))}},{"../shared/issues":10,"../shared/routes":12}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flashBg=void 0;r.flashBg=t=>{t.forEach(t=>{t.animate({background:["#b3d9ff","#7fbfff","#b3d9ff"],easing:"ease-out"},{fill:"forwards",duration:400})})}},{}],3:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DueDateAttr=void 0;r.DueDateAttr=class{constructor(t){this._p=t.querySelector("p:has(> #issue_due_date)")}p(){return this._p}input(){return this._p.querySelector("input")}}},{}],4:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TrackerAttr=r.StatusAttr=r.IntAttr=r.DueDateAttr=void 0;var s=t("./due-date-attr"),n=(Object.defineProperty(r,"DueDateAttr",{enumerable:!0,get:function(){return s.DueDateAttr}}),t("./int-attr")),i=(Object.defineProperty(r,"IntAttr",{enumerable:!0,get:function(){return n.IntAttr}}),t("./status-attr")),u=(Object.defineProperty(r,"StatusAttr",{enumerable:!0,get:function(){return i.StatusAttr}}),t("./tracker-attr"));Object.defineProperty(r,"TrackerAttr",{enumerable:!0,get:function(){return u.TrackerAttr}})},{"./due-date-attr":3,"./int-attr":5,"./status-attr":6,"./tracker-attr":7}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IntAttr=void 0;r.IntAttr=class{constructor(t){this._p=t}p(){return this._p}name(){var t=(this._p.querySelector("label span.field-description")||this._p.querySelector("label span"))?.textContent||"";return""===t&&console.warn("属性名が取得できませんでした",this._p),t}input(){return this._p.querySelector("input")}}},{}],6:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StatusAttr=void 0;r.StatusAttr=class{constructor(t){this._p=t.querySelector("p:has(> #issue_status_id)")}select(){return this._p.querySelector("select")}}},{}],7:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TrackerAttr=void 0;r.TrackerAttr=class{constructor(t){this._p=t.querySelector("p:has(> #issue_tracker_id)")}select(){return this._p.querySelector("select")}}},{}],8:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Formula=void 0;const s=t("../../animates"),n=t("../../sanitizers"),i=t("../property");r.Formula=class{constructor(t){this.option=t,this.intAttrs=(new i.Property).intCustomFields(),this.decorate(),this.normalize()}execute(){var t=this.factors().map(t=>Number(t.input().value));this.result().input().value=this.option.calc(t).toString(),(0,s.flashBg)(this.targets().map(t=>t.p()))}factors(){const e=new RegExp(this.option.nameKey+"$");return this.intAttrs.filter(t=>e.test(t.name()))}result(){const e=new RegExp(`［${this.option.nameKey}］$`);var t=this.intAttrs.filter(t=>e.test(t.name()));if(1!==t.length)throw console.error(`［${this.option.nameKey}］が複数設定されています`,t),new ReferenceError;return t[0]}targets(){return[...this.factors(),this.result()]}decorate(){this.targets().forEach(t=>{t.p().classList.add(`cs-${this.option.key}-target`)}),this.result().input().readOnly=!0,this.result().input().classList.add(`cs-${this.option.key}-effect`)}normalize(){var t=this.factors().map(t=>t.input());(0,n.sanitizeWithOne)(t)}}},{"../../animates":2,"../../sanitizers":13,"../property":11}],9:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Formula=void 0;var s=t("./formula");Object.defineProperty(r,"Formula",{enumerable:!0,get:function(){return s.Formula}})},{"./formula":8}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Property=r.Formula=r.TrackerAttr=r.IntAttr=void 0;var s=t("./attrs"),n=(Object.defineProperty(r,"IntAttr",{enumerable:!0,get:function(){return s.IntAttr}}),Object.defineProperty(r,"TrackerAttr",{enumerable:!0,get:function(){return s.TrackerAttr}}),t("./concepts")),i=(Object.defineProperty(r,"Formula",{enumerable:!0,get:function(){return n.Formula}}),t("./property"));Object.defineProperty(r,"Property",{enumerable:!0,get:function(){return i.Property}})},{"./attrs":4,"./concepts":9,"./property":11}],11:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Property=void 0;const s=t("./attrs");r.Property=class{constructor(){this._div=document.querySelector("div#all_attributes")}div(){return this._div}tracker(){return new s.TrackerAttr(this._div)}status(){return new s.StatusAttr(this._div)}dueDate(){return new s.DueDateAttr(this._div)}intCustomFields(){var t=this._div.querySelectorAll("p:has(> .int_cf)");return Array.from(t).map(t=>new s.IntAttr(t))}}},{"./attrs":4}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isIssueNew=r.isIssueShow=void 0;r.isIssueShow=()=>/^\/issues\/\d+$/.test(location.pathname);r.isIssueNew=()=>/^\/projects\/\w+\/issues\/new$/.test(location.pathname)},{}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isInteger=r.isDate=r.sanitizeWithOne=void 0;r.sanitizeWithOne=t=>{t.map(t=>{(0,r.isInteger)(t.value)||(t.value="1")})},r.isDate=t=>/^\d{4}-\d{2}-\d{2}$/.test(t);r.isInteger=t=>/^-?([1-9]\d*|0)$/.test(t)},{}]},{},[1]);