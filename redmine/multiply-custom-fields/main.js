!function s(n,i,o){function u(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(a)return a(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=i[t]={exports:{}},n[t][0].call(r.exports,function(e){return u(n[t][1][e]||e)},r,r.exports,s,n,i,o)}return i[t].exports}for(var a="function"==typeof require&&require,e=0;e<o.length;e++)u(o[e]);return u}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const s=e("../shared/issues");r=e("../shared/routes");{const n={key:"mcf",nameKey:"＊",calc:e=>e.reduce((e,t)=>e*t,1)};((0,r.isIssueShow)()||(0,r.isIssueNew)())&&(new s.Formula(n).execute(),(new s.Property).div().addEventListener("change",e=>{const t=e.target;e=new s.Formula(n);e.factors().some(e=>e.input().isEqualNode(t))&&e.execute(),(new s.Property).tracker().select().isEqualNode(t)&&setTimeout(()=>new s.Formula(n).execute(),700)}))}},{"../shared/issues":9,"../shared/routes":11}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flashBg=void 0;r.flashBg=e=>{e.forEach(e=>{e.animate({background:["#b3d9ff","#7fbfff","#b3d9ff"],easing:"ease-out"},{fill:"forwards",duration:400})})}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DueDateAttr=void 0;r.DueDateAttr=class{constructor(e){this._p=e.querySelector("p:has(> #issue_due_date)")}p(){return this._p}input(){return this._p.querySelector("input")}}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TrackerAttr=r.IntAttr=r.DueDateAttr=void 0;var s=e("./due-date-attr"),n=(Object.defineProperty(r,"DueDateAttr",{enumerable:!0,get:function(){return s.DueDateAttr}}),e("./int-attr")),i=(Object.defineProperty(r,"IntAttr",{enumerable:!0,get:function(){return n.IntAttr}}),e("./tracker-attr"));Object.defineProperty(r,"TrackerAttr",{enumerable:!0,get:function(){return i.TrackerAttr}})},{"./due-date-attr":3,"./int-attr":5,"./tracker-attr":6}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IntAttr=void 0;r.IntAttr=class{constructor(e){this._p=e}p(){return this._p}name(){var e=(this._p.querySelector("label span.field-description")||this._p.querySelector("label span"))?.textContent||"";return""===e&&console.warn("属性名が取得できませんでした",this._p),e}input(){return this._p.querySelector("input")}}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TrackerAttr=void 0;r.TrackerAttr=class{constructor(e){this._p=e.querySelector("p:has(> #issue_tracker_id)")}select(){return this._p.querySelector("select")}}},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Formula=void 0;const s=e("../../animates"),n=e("../../sanitizers"),i=e("../property");r.Formula=class{constructor(e){this.option=e,this.intAttrs=(new i.Property).intCustomFields(),this.decorate(),this.normalize()}execute(){var e=this.factors().map(e=>Number(e.input().value));this.result().input().value=this.option.calc(e).toString(),(0,s.flashBg)(this.targets().map(e=>e.p()))}factors(){const t=new RegExp(this.option.nameKey+"$");return this.intAttrs.filter(e=>t.test(e.name()))}result(){const t=new RegExp(`［${this.option.nameKey}］$`);var e=this.intAttrs.filter(e=>t.test(e.name()));if(1!==e.length)throw console.error(`［${this.option.nameKey}］が複数設定されています`,e),new ReferenceError;return e[0]}targets(){return[...this.factors(),this.result()]}decorate(){this.targets().forEach(e=>{e.p().classList.add(`cs-${this.option.key}-target`)}),this.result().input().readOnly=!0,this.result().input().classList.add(`cs-${this.option.key}-effect`)}normalize(){var e=this.factors().map(e=>e.input());(0,n.sanitizeWithOne)(e)}}},{"../../animates":2,"../../sanitizers":12,"../property":10}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Formula=void 0;var s=e("./formula");Object.defineProperty(r,"Formula",{enumerable:!0,get:function(){return s.Formula}})},{"./formula":7}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Property=r.Formula=r.TrackerAttr=r.IntAttr=void 0;var s=e("./attrs"),n=(Object.defineProperty(r,"IntAttr",{enumerable:!0,get:function(){return s.IntAttr}}),Object.defineProperty(r,"TrackerAttr",{enumerable:!0,get:function(){return s.TrackerAttr}}),e("./concepts")),i=(Object.defineProperty(r,"Formula",{enumerable:!0,get:function(){return n.Formula}}),e("./property"));Object.defineProperty(r,"Property",{enumerable:!0,get:function(){return i.Property}})},{"./attrs":4,"./concepts":8,"./property":10}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Property=void 0;const s=e("./attrs");r.Property=class{constructor(){this._div=document.querySelector("div#all_attributes")}div(){return this._div}tracker(){return new s.TrackerAttr(this._div)}dueDate(){return new s.DueDateAttr(this._div)}intCustomFields(){var e=this._div.querySelectorAll("p:has(> .int_cf)");return Array.from(e).map(e=>new s.IntAttr(e))}}},{"./attrs":4}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isIssueNew=r.isIssueShow=void 0;r.isIssueShow=()=>/^\/issues\/\d+$/.test(location.pathname);r.isIssueNew=()=>/^\/projects\/\w+\/issues\/new$/.test(location.pathname)},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isInteger=r.isDate=r.sanitizeWithOne=void 0;r.sanitizeWithOne=e=>{e.map(e=>{(0,r.isInteger)(e.value)||(e.value="1")})},r.isDate=e=>/^\d{4}-\d{2}-\d{2}$/.test(e);r.isInteger=e=>/^-?([1-9]\d*|0)$/.test(e)},{}]},{},[1]);